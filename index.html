<!DOCTYPE html><html><head><title>Instant Lead Alerts</title><style>body, html {
  height:100%;
  width:100%;
  padding:0;
  margin:0;
  overflow:hidden;
  background-color:#ddd;
}
.wrapper {
  height:100%;
  width:100%;
}</style><link rel="shortcut icon" href="//twilio.com/bundles/marketing/img/favicons/favicon.ico"><link rel="apple-touch-icon" href="//twilio.com/bundles/marketing/img/favicons/favicon_57.png"><link rel="apple-touch-icon" sizes="72x72" href="//twilio.com/bundles/marketing/img/favicons/favicon_72.png"><link rel="apple-touch-icon" sizes="114x114" href="//twilio.com/bundles/marketing/img/favicons/favicon_114.png"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="stylesheet" href="viewsaurus.css"></head><body><div class="wrapper"><div id="viewsaurus" data-title="Instant Lead Alerts"><div class="saurus-panes"><div class="saurus-prose"><div class="saurus-prose-header"><div class="title-outer"><span class="step-title">Instant Lead Alerts</span></div></div><div class="saurus-nav-buttons"><div class="saurus-nav-button nav-overview"><div class="saurus-nav-button-inner"><i class="fa fa-fw fa-list"></i></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-previous"><div class="saurus-nav-button-inner"><a href=""> <i class="fa fa-fw fa-play fa-rotate-180"></i></a></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-next clickable"><div class="saurus-nav-button-inner"><a href="#1"> <i class="fa fa-fw fa-play"></i></a></div></div><div class="saurus-next-title"><span class="next-title-inner"></span></div></div><div class="saurus-progress-bar"></div><div class="saurus-start"><p>In this tutorial, we'll learn how to instantly route leads to real estate sales reps using text messages. Let's get started!</p><a href="#0">Start Tutorial</a></div><div class="saurus-content"><div data-title="Setting Up The Application" class="chapter"><div data-title="What Are We Building?" data-file="src/main/webapp/home.jsp" class="step"><h2 id="what-are-we-building-">What Are We Building?</h2>
<p>You probably already have landing pages or product detail views in your
web application that you&#39;re using to generate leads for your business. 
In this tutorial, we&#39;ll use Twilio SMS to send a message when a new lead
is found.</p>
<p><img src="//s3.amazonaws.com/howtodocs/lead-alerts-flow.png" alt="Lead Alerts Flow"></p>
<p>In this example we&#39;ll be implementing instant lead alerts for real estate
(much like <a href="//www.twilio.com/customers/stories/trulia">our awesome friends at
Trulia</a>). We&#39;ll create a
landing page for a new house on the market, and notify a real estate agent
the moment a potential customer requests information. </p>
<p>Let&#39;s see how it works! Click the next arrow above to continue the tutorial.</p>
</div><div data-title="Landing Page Data" data-file="src/main/java/com/twilio/leadalerts/HomeServlet.java" class="step"><h2 id="landing-page-data">Landing Page Data</h2>
<p>To display a landing page for our house, we&#39;ll first need some data about
the fictional house we&#39;ve put on the market. For demonstration purposes,
we&#39;ve hard-coded the information we need.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="//docs.oracle.com/javaee/6/tutorial/doc/bnafe.html">What is a Java Servlet?</a></li>
</ul>
</div><div data-title="Rendering the Landing Page" data-file="src/main/webapp/home.jsp" class="step"><h2 id="rendering-the-landing-page">Rendering the Landing Page</h2>
<p>In our landing page, we'll insert data about the house. We'll use a sidebar to include a form for the user to enter in their contact information. That way, they can request more info about the home.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="//jstl.java.net/">JSP Standard Tag Library</a></li>
</ul>
</div><div data-title="Creating a Twilio API Client" data-file="src/main/java/com/twilio/leadalerts/lib/MessageSender.java" data-highlight="14-42" class="step"><h2 id="creating-a-twilio-rest-api-client">Creating a Twilio REST API Client</h2>
<p>Here we create a helper class with an authenticated Twilio REST
API client that we can use anytime we need to send a text message. We
initialize it with our <a href="//www.twilio.com/user/account/messaging/dashboard">Twilio Account Credentials</a> 
stored as environment variables.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="//www.twilio.com/docs/quickstart/java/sms/sending-via-rest">Twilio SMS and MMS Quickstart</a></li>
</ul>
</div><div data-title="Handling the POST Request" data-file="src/main/java/com/twilio/leadalerts/NotificationsServlet.java" data-highlight="25-42" class="step"><h2 id="handling-the-post-request">Handling the POST Request</h2>
<p>This code handles the HTTP <code>POST</code> request issued by our landing page. It 
uses our <code>MessageSender</code> class to send an SMS message to the real estate 
agent&#39;s phone number, which is also set as an environment variable. We 
include the lead&#39;s name, phone number, and inquiry directly into the body of 
the text message we send to the agent.</p>
<p>Now the agent has all the information they need to follow up on the lead immediately.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="//docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServlet.html">HttpServlet</a></li>
</ul>
</div><div class="step"><h2 id="where-to-next-">Where to next?</h2>
<p>That&#39;s it! We&#39;ve just implemented an application to instantly route leads
to sales people using text messages. If you&#39;re a
Rails developer working with Twilio, you might want to check out these
other tutorials.</p>
<p><a href="//www.twilio.com/docs/tutorials/walkthrough/click-to-call/java/servlets"><strong>Click-To-Call</strong></a></p>
<p>Click-to-call enables your company to convert web traffic into phone calls
with the click of a button.</p>
<p><a href="//www.twilio.com/docs/tutorials/walkthrough/ivr-phone-tree/java/servlets"><strong>IVR: Phone Tree</strong></a></p>
<p>Easily route callers to the right people and information with an IVR
(interactive voice response) system.</p>
<h3 id="did-this-help-">Did this help?</h3>
<p>Thanks for checking out this tutorial! If you have any feedback
to share with us, we&#39;d love to hear it. Tweet
<a href="//twitter.com/twilio">@twilio</a> to let us know what you
think.</p>
</div></div>
<div class="saurus-files" style="display:none;"><textarea class="saurus-file" data-file="src/main/webapp/home.jsp" data-mode="jsp">PCVAIHBhZ2UgcGFnZUVuY29kaW5nPSJVVEYtOCIgJT4KPCVAIHRhZ2xpYiBwcmVmaXg9ImNvcmUiIHVyaT0iaHR0cDovL2phdmEuc3VuLmNvbS9qc3AvanN0bC9jb3JlIiAlPgoKPCFET0NUWVBFIGh0bWw+CjxodG1sPgo8aGVhZD4KICAgIDxtZXRhIGNoYXJzZXQ9InV0Zi04IiAvPgogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiPgogICAgPHRpdGxlPkxlYWQgQWxlcnRzPC90aXRsZT4KCiAgICA8bGluayBocmVmPSIvL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjMuNi9jc3MvYm9vdHN0cmFwLm1pbi5jc3MiIHJlbD0ic3R5bGVzaGVldCI+CiAgICA8bGluayBocmVmPSIvL21heGNkbi5ib290c3RyYXBjZG4uY29tL2ZvbnQtYXdlc29tZS80LjUuMC9jc3MvZm9udC1hd2Vzb21lLm1pbi5jc3MiIHJlbD0ic3R5bGVzaGVldCI+CiAgICA8bGluayBocmVmPSJjc3Mvc2l0ZS5jc3MiIHJlbD0ic3R5bGVzaGVldCI+CjwvaGVhZD4KPGJvZHk+CiAgICA8ZGl2IGlkPSJtYWluIiBjbGFzcz0iY29udGFpbmVyIj4KICAgICAgICA8Y29yZTppZiB0ZXN0PSIke25vdCBlbXB0eSBzdWNjZXNzfSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFsZXJ0IGFsZXJ0LXN1Y2Nlc3MiIHJvbGU9ImFsZXJ0Ij4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iY2xvc2UiIGRhdGEtZGlzbWlzcz0iYWxlcnQiIGFyaWEtbGFiZWw9IkNsb3NlIj4KICAgICAgICAgICAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49InRydWUiPiZ0aW1lczs8L3NwYW4+CiAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICR7c3VjY2Vzc30KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9jb3JlOmlmPgogICAgICAgIDxjb3JlOmlmIHRlc3Q9IiR7bm90IGVtcHR5IGVycm9yfSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFsZXJ0IGFsZXJ0LWRhbmdlciIgcm9sZT0iYWxlcnQiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJjbG9zZSIgZGF0YS1kaXNtaXNzPSJhbGVydCIgYXJpYS1sYWJlbD0iQ2xvc2UiPgogICAgICAgICAgICAgICAgICA8c3BhbiBhcmlhLWhpZGRlbj0idHJ1ZSI+JnRpbWVzOzwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgJHtlcnJvcn0KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9jb3JlOmlmPgogICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbC1zbS04Ij4KICAgICAgICAgICAgICAgIDxoMT4ke2hvdXNlVGl0bGV9PC9oMT4KICAgICAgICAgICAgICAgIDxoMz4ke2hvdXNlUHJpY2V9PC9oMz4KICAgICAgICAgICAgICAgIDxpbWcgc3JjPSJpbWFnZXMvaG91c2UuanBnIiBhbHQ9IkhvdXNlIiAvPgogICAgICAgICAgICAgICAgPHA+JHtob3VzZURlc2NyaXB0aW9ufTwvcD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbC1zbS0yIGRlbW8iPgogICAgICAgICAgICAgICAgPGg0PlRhbGsgVG8gQW4gQWdlbnQ8L2g0PgogICAgICAgICAgICAgICAgPHA+CiAgICAgICAgICAgICAgICAgICAgQSB0cmFpbmVkIHJlYWwgZXN0YXRlIHByb2Zlc3Npb25hbCBpcyBzdGFuZGluZyBieSB0byBhbnN3ZXIgYW55CiAgICAgICAgICAgICAgICAgICAgcXVlc3Rpb25zIHlvdSBtaWdodCBoYXZlIGFib3V0IHRoaXMgcHJvcGVydHkuIEZpbGwgb3V0IHRoZSBmb3JtIGJlbG93CiAgICAgICAgICAgICAgICAgICAgd2l0aCB5b3VyIGNvbnRhY3QgaW5mb3JtYXRpb24sIGFuZCBhbiBhZ2VudCB3aWxsIHJlYWNoIG91dCBzb29uLgogICAgICAgICAgICAgICAgPC9wPgogICAgICAgICAgICAgICAgPGZvcm0gYWN0aW9uPSIvbm90aWZpY2F0aW9ucyIgbWV0aG9kPSJQT1NUIj4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJob3VzZVRpdGxlIiB2YWx1ZT0iJHtob3VzZVRpdGxlfSIgLz4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0ibmFtZSI+WW91ciBOYW1lPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJuYW1lIiBuYW1lPSJuYW1lIiBjbGFzcz0iZm9ybS1jb250cm9sIiBwbGFjZWhvbGRlcj0iSm9obiBBcHBsZXNlZWQiIC8+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9InBob25lIj5Zb3VyIFBob25lIE51bWJlcjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0icGhvbmUiIG5hbWU9InBob25lIiBjbGFzcz0iZm9ybS1jb250cm9sIiBwbGFjZWhvbGRlcj0iKzE2NTEyMjI5OTg4IiAvPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJtZXNzYWdlIj5Ib3cgY2FuIHdlIGhlbHA/PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJtZXNzYWdlIiBuYW1lPSJtZXNzYWdlIiBjbGFzcz0iZm9ybS1jb250cm9sIiAvPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0ic3VibWl0IiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5Ij5SZXF1ZXN0IEluZm88L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZm9ybT4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICAgIDxmb290ZXIgY2xhc3M9ImNvbnRhaW5lciI+CiAgICAgICAgTWFkZSB3aXRoIDxpIGNsYXNzPSJmYSBmYS1oZWFydCI+PC9pPiBieSB5b3VyIHBhbHMgPGEgaHJlZj0iaHR0cDovL3d3dy50d2lsaW8uY29tIj5AdHdpbGlvPC9hPi4KICAgIDwvZm9vdGVyPgogICAgPHNjcmlwdCBzcmM9Ii8vY29kZS5qcXVlcnkuY29tL2pxdWVyeS0yLjEuNC5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iLy9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4zLjYvanMvYm9vdHN0cmFwLm1pbi5qcyI+PC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPgo=</textarea>
<textarea class="saurus-file" data-file="src/main/java/com/twilio/leadalerts/HomeServlet.java" data-mode="java">cGFja2FnZSBjb20udHdpbGlvLmxlYWRhbGVydHM7CgppbXBvcnQgamF2YXguc2VydmxldC5TZXJ2bGV0RXhjZXB0aW9uOwppbXBvcnQgamF2YXguc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0OwppbXBvcnQgamF2YXguc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVxdWVzdDsKaW1wb3J0IGphdmF4LnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlc3BvbnNlOwppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKCnB1YmxpYyBjbGFzcyBIb21lU2VydmxldCBleHRlbmRzIEh0dHBTZXJ2bGV0IHsKCiAgICBAT3ZlcnJpZGUKICAgIHByb3RlY3RlZCB2b2lkIGRvR2V0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKSB0aHJvd3MgSU9FeGNlcHRpb24sIFNlcnZsZXRFeGNlcHRpb24gewogICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKCJob3VzZVRpdGxlIiwgIjU1NSBTdW5ueWJyb29rIExhbmUiKTsKICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZSgiaG91c2VQcmljZSIsICIkMzQ5LDk5OSIpOwogICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKCJob3VzZURlc2NyaXB0aW9uIiwKICAgICAgICAgICAgICAgICJZb3UgYW5kIHlvdXIgZmFtaWx5IHdpbGwgbG92ZSB0aGlzIGNoYXJtaW5nIGhvbWUuICIgKwogICAgICAgICAgICAgICAgIkZlYXR1cmluZyBncmFuaXRlIGFwcGxpYW5jZXMsIHN0YWlubGVzcyBzdGVlbCB3aW5kb3dzLCBhbmQgIiArCiAgICAgICAgICAgICAgICAiaGlnaCBlZmZpY2llbmN5IGR1YWwgbXVkIHJvb21zLCB0aGlzIGpvaW50IGlzIGxvYWRlZCB0byB0aGUgbWF4LiAiICsKICAgICAgICAgICAgICAgICJNb3RpdmF0ZWQgc2VsbGVycyBoYXZlIHByaWNlZCBmb3IgYSBxdWljayBzYWxlLCBhY3Qgbm93ISIpOwoKICAgICAgICByZXF1ZXN0LmdldFJlcXVlc3REaXNwYXRjaGVyKCJob21lLmpzcCIpLmZvcndhcmQocmVxdWVzdCwgcmVzcG9uc2UpOwogICAgfQp9Cg==</textarea>
<textarea class="saurus-file" data-file="src/main/java/com/twilio/leadalerts/lib/MessageSender.java" data-mode="java">cGFja2FnZSBjb20udHdpbGlvLmxlYWRhbGVydHMubGliOwoKaW1wb3J0IGNvbS50d2lsaW8ubGVhZGFsZXJ0cy5saWIuY29uZmlnLkNyZWRlbnRpYWxzOwppbXBvcnQgY29tLnR3aWxpby5sZWFkYWxlcnRzLmxpYi5jb25maWcuUGhvbmVOdW1iZXJzOwppbXBvcnQgY29tLnR3aWxpby5zZGsuVHdpbGlvUmVzdENsaWVudDsKaW1wb3J0IGNvbS50d2lsaW8uc2RrLlR3aWxpb1Jlc3RFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLmh0dHAuTmFtZVZhbHVlUGFpcjsKaW1wb3J0IG9yZy5hcGFjaGUuaHR0cC5tZXNzYWdlLkJhc2ljTmFtZVZhbHVlUGFpcjsKCmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CgpAU3VwcHJlc3NXYXJuaW5ncygidW51c2VkIikKcHVibGljIGNsYXNzIE1lc3NhZ2VTZW5kZXIgewogICAgcHJpdmF0ZSBmaW5hbCBUd2lsaW9SZXN0Q2xpZW50IGNsaWVudDsKCiAgICBwdWJsaWMgTWVzc2FnZVNlbmRlcigpIHsKICAgICAgICBjbGllbnQgPSBuZXcgVHdpbGlvUmVzdENsaWVudCgKICAgICAgICAgICAgICAgIENyZWRlbnRpYWxzLmdldFR3aWxpb0FjY291bnRTaWQoKSwKICAgICAgICAgICAgICAgIENyZWRlbnRpYWxzLmdldFR3aWxpb0F1dGhUb2tlbigpKTsKICAgIH0KCiAgICBwdWJsaWMgTWVzc2FnZVNlbmRlcihUd2lsaW9SZXN0Q2xpZW50IGNsaWVudCkgewogICAgICAgIHRoaXMuY2xpZW50ID0gY2xpZW50OwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNlbmQoU3RyaW5nIG1lc3NhZ2UpIHRocm93cyBUd2lsaW9SZXN0RXhjZXB0aW9uIHsKICAgICAgICBMaXN0PE5hbWVWYWx1ZVBhaXI+IHBhcmFtcyA9IGJ1aWxkUGFyYW1zKG1lc3NhZ2UpOwoKICAgICAgICBjbGllbnQuZ2V0QWNjb3VudCgpLmdldE1lc3NhZ2VGYWN0b3J5KCkuY3JlYXRlKHBhcmFtcyk7CiAgICB9CgogICAgcHJpdmF0ZSBMaXN0PE5hbWVWYWx1ZVBhaXI+IGJ1aWxkUGFyYW1zKFN0cmluZyBtZXNzYWdlKSB7CiAgICAgICAgTGlzdDxOYW1lVmFsdWVQYWlyPiBwYXJhbXMgPSBuZXcgQXJyYXlMaXN0PD4oKTsKCiAgICAgICAgcGFyYW1zLmFkZChuZXcgQmFzaWNOYW1lVmFsdWVQYWlyKCJUbyIsIFBob25lTnVtYmVycy5nZXRBZ2VudFBob25lTnVtYmVyKCkpKTsKICAgICAgICBwYXJhbXMuYWRkKG5ldyBCYXNpY05hbWVWYWx1ZVBhaXIoIkZyb20iLCBQaG9uZU51bWJlcnMuZ2V0VHdpbGlvUGhvbmVOdW1iZXIoKSkpOwogICAgICAgIHBhcmFtcy5hZGQobmV3IEJhc2ljTmFtZVZhbHVlUGFpcigiQm9keSIsIG1lc3NhZ2UpKTsKCiAgICAgICAgcmV0dXJuIHBhcmFtczsKICAgIH0KfQo=</textarea>
<textarea class="saurus-file" data-file="src/main/java/com/twilio/leadalerts/NotificationsServlet.java" data-mode="java">cGFja2FnZSBjb20udHdpbGlvLmxlYWRhbGVydHM7CgppbXBvcnQgY29tLnR3aWxpby5sZWFkYWxlcnRzLmxpYi5NZXNzYWdlU2VuZGVyOwppbXBvcnQgY29tLnR3aWxpby5zZGsuVHdpbGlvUmVzdEV4Y2VwdGlvbjsKCmltcG9ydCBqYXZheC5zZXJ2bGV0LlNlcnZsZXRFeGNlcHRpb247CmltcG9ydCBqYXZheC5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXQ7CmltcG9ydCBqYXZheC5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXF1ZXN0OwppbXBvcnQgamF2YXguc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVzcG9uc2U7CmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOwoKcHVibGljIGNsYXNzIE5vdGlmaWNhdGlvbnNTZXJ2bGV0IGV4dGVuZHMgSHR0cFNlcnZsZXQgewoKICAgIHByaXZhdGUgZmluYWwgTWVzc2FnZVNlbmRlciBtZXNzYWdlU2VuZGVyOwoKICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bnVzZWQiKQogICAgcHVibGljIE5vdGlmaWNhdGlvbnNTZXJ2bGV0KCkgewogICAgICAgIHRoaXMobmV3IE1lc3NhZ2VTZW5kZXIoKSk7CiAgICB9CgogICAgcHVibGljIE5vdGlmaWNhdGlvbnNTZXJ2bGV0KE1lc3NhZ2VTZW5kZXIgbWVzc2FnZVNlbmRlcikgewogICAgICAgIHRoaXMubWVzc2FnZVNlbmRlciA9IG1lc3NhZ2VTZW5kZXI7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQgdm9pZCBkb1Bvc3QoSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UpIHRocm93cyBJT0V4Y2VwdGlvbiwgU2VydmxldEV4Y2VwdGlvbiB7CiAgICAgICAgU3RyaW5nIGhvdXNlVGl0bGUgPSByZXF1ZXN0LmdldFBhcmFtZXRlcigiaG91c2VUaXRsZSIpOwogICAgICAgIFN0cmluZyBuYW1lID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoIm5hbWUiKTsKICAgICAgICBTdHJpbmcgcGhvbmUgPSByZXF1ZXN0LmdldFBhcmFtZXRlcigicGhvbmUiKTsKICAgICAgICBTdHJpbmcgbWVzc2FnZSA9IHJlcXVlc3QuZ2V0UGFyYW1ldGVyKCJtZXNzYWdlIik7CgogICAgICAgIFN0cmluZyBmb3JtYXR0ZWRNZXNzYWdlID0gZm9ybWF0TWVzc2FnZShob3VzZVRpdGxlLCBuYW1lLCBwaG9uZSwgbWVzc2FnZSk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbWVzc2FnZVNlbmRlci5zZW5kKGZvcm1hdHRlZE1lc3NhZ2UpOwogICAgICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZSgic3VjY2VzcyIsICJUaGFua3MhIEFuIGFnZW50IHdpbGwgYmUgY29udGFjdGluZyB5b3Ugc2hvcnRseS4iKTsKICAgICAgICB9IGNhdGNoIChUd2lsaW9SZXN0RXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTsKICAgICAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoImVycm9yIiwgIk9vcHMhIFRoZXJlIHdhcyBhbiBlcnJvci4gUGxlYXNlIHRyeSBhZ2Fpbi4iKTsKICAgICAgICB9CgogICAgICAgIHJlcXVlc3QuZ2V0UmVxdWVzdERpc3BhdGNoZXIoImhvbWUuanNwIikuZm9yd2FyZChyZXF1ZXN0LCByZXNwb25zZSk7CiAgICB9CgoKICAgIHByaXZhdGUgU3RyaW5nIGZvcm1hdE1lc3NhZ2UoU3RyaW5nIGhvdXNlVGl0bGUsIFN0cmluZyBuYW1lLCBTdHJpbmcgcGhvbmUsIFN0cmluZyBtZXNzYWdlKSB7CiAgICAgICAgcmV0dXJuIFN0cmluZy5mb3JtYXQoIk5ldyBsZWFkIHJlY2VpdmVkIGZvciAlcy4gQ2FsbCAlcyBhdCAlcy4gTWVzc2FnZTogJXMiLAogICAgICAgICAgICAgICAgaG91c2VUaXRsZSwgbmFtZSwgcGhvbmUsIG1lc3NhZ2UpOwogICAgfQp9Cg==</textarea>
</div>
</div><div class="saurus-overview"><ul></ul></div></div><div class="saurus-code"><div class="file-path"><span class="crumb-container"></span><i class="fa fa-fw fa-folder"></i></div><div class="saurus-editor"></div></div><div class="saurus-explorer"><div class="saurus-file-list"></div><a href="https://github.com/TwilioDevEd/lead-alerts-servlets" target="_blank" class="explorer-get-code"> <i class="fa fa-lg fa-github-square"> </i>View Code on GitHub</a></div></div></div></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script><script src="ace/ace.js"></script><script src="ace/theme-monokai.js"></script><script src="viewsaurus.js"></script></body></html>